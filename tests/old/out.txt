Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Introduction" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="In the Azure portal, there is a rich and customizable set of tools that display metrics from Azure Monitor. If you are using Binary Large Objects (blobs) in an Azure Storage account, these tools can display an array of metrics for that data. However, sometimes you might wish to display that data outside of Azure." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Suppose, for example, you work for a video analysis company that carries out color grading and processing of video commercials. You've migrated the storage of daily rushes to Azure Blob Storage, and you have a well-established set of displays and dashboards that show administrators how the Azure Storage account is responding to users." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Administrators have a custom mobile app that they use to configure aspects of your system, including video processing web services and Azure functions. However, this tool cannot display blob storage metrics, so if administrators want to investigate performance, they must access the Azure portal." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="You want to add code to the mobile app to display storage metrics on mobile devices. In this module, you'll learn how to access such data from C# code in a client application, such as a mobile app." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Learning Objectives" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="At the end of this module, you will be able to:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Access storage metrics in Azure Monitor by using the REST API" 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Use the .NET SDK for Azure Monitor to access Blob metrics and data programmatically" 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Prerequisites" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Knowledge of Azure portal" 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Knowledge of Azure Blob Storage Containers" 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Ability to write and understand C# code and .NET framework classes" 
Microsoft.DocAsCode.MarkdigEngine.Extensions.QuoteSectionNoteBlock NOTE
	Markdig.Syntax.ParagraphBlock 
		LiteralInline Value="For this module, you will need to use your own subscription to complete the optional exercises, and a trial subscription or a subscription that you already have access to will work to follow along." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Connect to Azure Storage metrics in Azure Monitor" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="In your video analysis company, you use Azure Blob Storage for storing daily rushes. Performance is a key consideration, and you want to ensure your administrators can see how the system behaves and whether it responds optimally to users." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="To do that, you must understand how your Storage Account sends information to Azure Monitor and how to access that information." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Overview of Azure Monitor" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Azure Monitor is a solution that can gather and store information from many different types of application components, and it includes a wide range of tools for analyzing, visualizing, and responding to this data. As such, Azure Monitor is a single tool that you can use to watch and optimize all the components of your system wherever they run." 
Microsoft.DocAsCode.MarkdigEngine.Extensions.TripleColonBlock image: type=complex, source=media/2-azure-monitor-overview.png, alt-text=Conceptual overview diagram of Azure Monitor.
	Markdig.Syntax.ParagraphBlock 
		LiteralInline Value="Diagram of Azure Monitor taking in inputs of Application, Operating System, Azure Resources, Azure Subscription, Azure Tenant, and Custom Sources. Those inputs lead to Metrics and Logs data stores, which then feed to systems for reporting and reaction, titled Insights, Visualize, Analyze, Respond, and Integrate." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Azure Monitor collects two types of data:" 
Markdig.Extensions.Tables.Table 
	Markdig.Extensions.Tables.TableRow 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="Data Type" 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="Description" 
	Markdig.Extensions.Tables.TableRow 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="" 
				EmphasisInline * Count: 2
					LiteralInline Value="Metrics" 
				LiteralInline Value="" 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="These are numerical values that describe some aspect of a component at a point in time. For example, an Average Server Response Time metric measures how long a component has taken to respond to users on average over the last few minutes. You can use the " 
				EmphasisInline * Count: 2
					LiteralInline Value="Metrics Explorer" 
				LiteralInline Value=" to show how these metrics vary over time." 
	Markdig.Extensions.Tables.TableRow 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="" 
				EmphasisInline * Count: 2
					LiteralInline Value="Logs" 
				LiteralInline Value="" 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="These are records of the behavior of a component, and they may contain telemetries such as events and traces. In the Azure portal, you can use the " 
				EmphasisInline * Count: 2
					LiteralInline Value="Log Analytics" 
				LiteralInline Value=" page to drill into this data and find individual events that interest you." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="By default, you can access 93 days of data in Azure Monitor. If you need to retain data for a longer period, you can archive it to an Azure Storage account." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="In addition to using the Azure portal to view and analyze Azure Monitor data, you can also use Application Programming Interfaces (APIs) to examine logs and metrics in code:" 
Markdig.Extensions.Tables.Table 
	Markdig.Extensions.Tables.TableRow 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="API" 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="Description" 
	Markdig.Extensions.Tables.TableRow 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="" 
				EmphasisInline * Count: 2
					LiteralInline Value="Azure Monitor REST API" 
				LiteralInline Value="" 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="A REST API is a web service that you can call from your code over HTTP and port 80. The responses are usually in JSON format." 
	Markdig.Extensions.Tables.TableRow 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="" 
				EmphasisInline * Count: 2
					LiteralInline Value="Azure Monitor .NET API" 
				LiteralInline Value="" 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="The .NET API is a set of .NET classes that you can add to any .NET project such as a desktop application, a mobile app, or an ASP.NET web app." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="The .NET API is slightly easier to use and requires fewer lines of code for typical operations. However, you can only use this API in .NET projects. If you want to use Node.js, for example, you cannot use the .NET API. The REST API can be called from any code that can make HTTP requests." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="If you complete the optional exercise in the next unit, you'll use the " 
	EmphasisInline * Count: 2
		LiteralInline Value="curl" 
	LiteralInline Value=" command-line tool to make REST requests." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Azure Monitor and Azure Storage" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="When you create a Storage Account in Azure, it is automatically configured to send storage metrics to Azure Monitor for later display and analysis." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Storage account metrics and classic storage metrics" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Originally, Azure Storage collected metrics and stored them in " 
	EmphasisInline * Count: 2
		LiteralInline Value="$Metric" 
	LiteralInline Value=" tables within the same storage account. These metrics are known as old metrics or classic metrics, and they included capacity measurements for blob storage, and transaction measurements for blob, table, file, and queue storage." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="In the Azure portal, classic storage metrics are shown on pages with " 
	EmphasisInline * Count: 2
		LiteralInline Value="(classic)" 
	LiteralInline Value=" appended to the title:" 
Markdig.Syntax.ParagraphBlock 
	LinkInline Url: media/2-classic-metrics-in-portal.png Title:  Image: True
		LiteralInline Value="Screenshot of the Azure Portal with the Monitoring (classic) navigation options highlighted." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Old storage metrics still work, but they are deprecated, and support for them is likely to end in the future. If you're using old metrics, you should migrate them to the new storage metrics as soon as possible." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="For new storage metrics, Azure Storage sends the data to the Azure Monitor backend in order to unify the metrics from Azure Storage with those of other Azure services. You get the same monitoring experience regardless of the data source in Azure Monitor, and you can integrate metrics from different sources into the same displays." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="This module discusses new Azure Storage metrics, but bear in mind: when you read about storage metrics, both old and new metrics exist. (Some third-party articles may not be entirely clear about which metrics they discuss.)" 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="How to use curl to make queries against the REST API" 
Markdig.Syntax.ParagraphBlock 
	EmphasisInline * Count: 2
		LiteralInline Value="curl" 
	LiteralInline Value=" is a command-line tool that is available in the Azure Cloud Shell, which you can use to make requests through the HTTP protocol. Because a REST API works over port 80, you can use " 
	EmphasisInline * Count: 2
		LiteralInline Value="curl" 
	LiteralInline Value=" to make test requests. This is a helpful technique to learn about the REST API you are using and to examine its behavior in order to help you write code to implement it." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Many REST APIs, including the Azure Monitor API, require you to authenticate before you can make requests in order to ensure security. To authenticate, you can use the " 
	EmphasisInline * Count: 2
		LiteralInline Value="az" 
	LiteralInline Value=" command to retrieve an authentication token:" 
Markdig.Syntax.FencedCodeBlock bash - 1 lines
 > AUTH_TOKEN="Authorization: Bearer $(az account get-access-token --query accessToken -o tsv)"
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Now you can use the " 
	EmphasisInline * Count: 2
		LiteralInline Value="curl" 
	LiteralInline Value=" tool and pass the authentication token:" 
Markdig.Syntax.FencedCodeBlock bash - 1 lines
 > curl -s -H "$AUTH_TOKEN" <url> | jq
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="The above command pipes the response to the " 
	EmphasisInline * Count: 2
		LiteralInline Value="jq" 
	LiteralInline Value=" utility, which helps to present the JSON data in a more readable format." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="How to formulate the correct URL for a request to the Azure Monitor REST API" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Any request to a REST API requires you to formulate the correct URL. Because functional APIs like the Azure Monitor API are often complex, the URL can be long and complex." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="To request the list of Azure Storage metrics from the Azure Monitor, use a URL like the one that is illustrated in the following example:" 
Markdig.Syntax.FencedCodeBlock bash - 1 lines
 > curl -s -H "$AUTH_TOKEN" https://management.azure.com/subscriptions/<Subscription ID>/resourceGroups/<Resource Group>/providers/Microsoft.Storage/storageAccounts/<Storage Account>/providers/microsoft.insights/metricdefinitions?api-version=2018-01-01 | jq
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Where you will need to identify the following values using the Azure portal and substitute them for the placeholders in the URL above:" 
Markdig.Extensions.Tables.Table 
	Markdig.Extensions.Tables.TableRow 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="URL Component" 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="Description" 
	Markdig.Extensions.Tables.TableRow 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="" 
				CodeInline Value="`<Subscription ID>`" 
				LiteralInline Value="" 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="This is the GUID for the Azure subscription where your storage account is located." 
	Markdig.Extensions.Tables.TableRow 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="" 
				CodeInline Value="`<Resource Group>`" 
				LiteralInline Value="" 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="This is the name of the resource group where your storage account is located." 
	Markdig.Extensions.Tables.TableRow 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="" 
				CodeInline Value="`<Storage Account>`" 
				LiteralInline Value="" 
		Markdig.Extensions.Tables.TableCell 
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="This is the name of your Azure Storage account." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Once you have retrieved a list of the Azure Storage metrics, you can query for the values of specific metrics over a time period. For example:" 
Markdig.Syntax.FencedCodeBlock bash - 1 lines
 > curl -s -H "$AUTH_TOKEN" https://management.azure.com/subscriptions/<Subscription ID>/resourceGroups/<Resource Group>/providers/Microsoft.Storage/storageAccounts/<Storage Account>/providers/microsoft.insights/metrics?metricnames=Availability&aggregation=Average&interval=PT1H&api-version=2018-01-01 | jq
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="If you perform the optional exercise in the next unit, you'll execute queries by using this method." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="You have a web application built with the Ruby on Rails framework. You want to show Azure Storage metrics stored in Azure Monitor in that application. Which API should you use?" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList True" 
			LiteralInline Value=" The Azure Monitor REST API" 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList False" 
			LiteralInline Value="The Azure Monitor .NET API" 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList False" 
			LiteralInline Value="The Azure Storage REST API" 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="You have an existing mobile app written in C# that displays metrics that it retrieves from the $Metric tables in a Storage Account. You want to ensure the app continues to function for the foreseeable future with as little replacement code as possible. What should you do?" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList False" 
			LiteralInline Value="Update the mobile app so that it use the Azure Storage REST API to access metrics." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList False" 
			LiteralInline Value="Update the mobile app so that it uses an Azure Storage .NET API to access metrics." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList True" 
			LiteralInline Value=" Update the mobile app so that it uses an Azure Monitor .NET API to access metrics." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Optional Exercise - Connect to Azure Storage metrics in Azure Monitor" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Before you begin writing code that retrieves and displays metrics in an app, you want to connect to the REST API and observe data that is available. To do this, you'll use the " 
	EmphasisInline * Count: 2
		LiteralInline Value="curl" 
	LiteralInline Value=" command-line tool to send a request." 
Microsoft.DocAsCode.MarkdigEngine.Extensions.QuoteSectionNoteBlock NOTE
	Markdig.Syntax.ParagraphBlock 
		LiteralInline Value="This exercise is optional. If you don't have an Azure account, you can read through the instructions so you understand how to use the REST API to retrieve metrics." 
		LineBreakInline Value="" 
		LiteralInline Value="If you want to complete this exercise but don't have an Azure subscription or prefer not to use your own account, you will need to create a " 
		LinkInline Url: https://azure.microsoft.com/free/?azure-portal=true Title:  Image: False
			LiteralInline Value="free account" 
		LiteralInline Value=" before you begin." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Create a storage account" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="You must start by creating the Azure Storage account that will send data to Azure Monitor. Follow these steps:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Go to the " 
			LinkInline Url: https://portal.azure.com/ Title:  Image: False
				LiteralInline Value="Azure portal" 
			LiteralInline Value=" and in the left nav bar, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Create a resource" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Search the marketplace" 
			LiteralInline Value=" textbox, enter " 
			EmphasisInline * Count: 2
				LiteralInline Value="Storage Account" 
			LiteralInline Value=", and then press " 
			HtmlInline Value="<kbs>" 
			LiteralInline Value="Enter" 
			HtmlInline Value="</kbd>" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the list of results, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Storage Account" 
			LiteralInline Value=", and then select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Create" 
			LiteralInline Value=". The " 
			EmphasisInline * Count: 2
				LiteralInline Value="Create a storage account" 
			LiteralInline Value=" window appears. Enter the following information." 
		Markdig.Extensions.Tables.Table 
			Markdig.Extensions.Tables.TableRow 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Setting" 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Value" 
			Markdig.Extensions.Tables.TableRow 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="In the " 
						EmphasisInline * Count: 2
							LiteralInline Value="Basics" 
						LiteralInline Value=" tab, under " 
						EmphasisInline * Count: 2
							LiteralInline Value="Project details" 
						LiteralInline Value=" section:" 
				Markdig.Extensions.Tables.TableCell 
			Markdig.Extensions.Tables.TableRow 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Subscription" 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Select your subscription" 
			Markdig.Extensions.Tables.TableRow 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Resource group" 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Select " 
						EmphasisInline * Count: 2
							LiteralInline Value="Create new" 
						LiteralInline Value=". Provide a name for the new resource group, and select " 
						EmphasisInline * Count: 2
							LiteralInline Value="OK" 
						LiteralInline Value=". For example, you could use " 
						EmphasisInline * Count: 2
							LiteralInline Value="videostorageresources" 
						LiteralInline Value="." 
			Markdig.Extensions.Tables.TableRow 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Under " 
						EmphasisInline * Count: 2
							LiteralInline Value="Instance details" 
						LiteralInline Value=" section:" 
				Markdig.Extensions.Tables.TableCell 
			Markdig.Extensions.Tables.TableRow 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Storage account name" 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Enter a unique name. This must be all lower case and unique to Azure. For example, you could use " 
						EmphasisInline * Count: 2
							HtmlEntityInline Value="&lt; -> <" 
							LiteralInline Value="yourname" 
							HtmlEntityInline Value="&gt; -> >" 
							LiteralInline Value="videostorage" 
						LiteralInline Value=", if that is not already in use. Make a note of the name you use." 
			Markdig.Extensions.Tables.TableRow 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Location" 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Select a location near you." 
			Markdig.Extensions.Tables.TableRow 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="" 
						EmphasisInline * Count: 1
							LiteralInline Value="Other settings" 
						LiteralInline Value="" 
				Markdig.Extensions.Tables.TableCell 
					Markdig.Syntax.ParagraphBlock 
						LiteralInline Value="Leave " 
						EmphasisInline * Count: 1
							LiteralInline Value="default" 
						LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Review + create" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Review the configuration, and then select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Create" 
			LiteralInline Value="." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Obtain the required values" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="In order to retrieve metrics from Azure Monitor that relate to your new storage account, you must identify that storage account uniquely in your request. You do this by including the storage account name, resource group name, and subscription ID in the request URL. You already know the name of the storage account but you must determine the resource group name and the subscription ID. Follow these steps:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="When the storage account has been created, in the portal, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="All resources" 
			LiteralInline Value=", and then select the storage account you created." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Carefully make a note of the following values, which are shown at the top of the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Overview" 
			LiteralInline Value=" page:" 
		Markdig.Syntax.ListBlock 
			Markdig.Syntax.ListItemBlock 
				Markdig.Syntax.ParagraphBlock 
					EmphasisInline * Count: 2
						LiteralInline Value="Resource group" 
			Markdig.Syntax.ListItemBlock 
				Markdig.Syntax.ParagraphBlock 
					EmphasisInline * Count: 2
						LiteralInline Value="Subscription ID" 
		Markdig.Syntax.ParagraphBlock 
			LinkInline Url: media/3-obtain-rg-and-subscription-ids.png Title:  Image: True
				LiteralInline Value="Screenshot of the storage account details in the Azure Portal with resource group and subscription ID values highlighted." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Send queries to the REST API" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="A REST API responds to requests sent through the HTTP protocol. For this reason, we can use the " 
	EmphasisInline * Count: 2
		LiteralInline Value="curl" 
	LiteralInline Value=" tool to send those requests and receive data in JSON format. To do this you need to pass an authentication token with your request and formulate the request URL carefully. Follow these steps:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the Azure portal, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Cloud Shell (" 
				HtmlEntityInline Value="&gt; -> >" 
				LiteralInline Value="_" 
				LiteralInline Value=")" 
			LiteralInline Value=" on the toolbar at the top of the window, and, if prompted, select the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Bash" 
			LiteralInline Value=" shell option." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To retrieve an authentication token, run the following command, and then press " 
			HtmlInline Value="<kbd>" 
			LiteralInline Value="Enter" 
			HtmlInline Value="</kbd>" 
			LiteralInline Value="." 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > AUTH_HEADER="Authorization: Bearer $(az account get-access-token --query accessToken -o tsv)"
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To store the necessary identifiers and names, run the following commands, substituting the values you determined earlier in this unit:" 
		Markdig.Syntax.FencedCodeBlock bash - 3 lines
		 > SUB_ID="<Subscription ID>"
		 > RG_NAME="<Resource Group Name>"
		 > SA_NAME="<Storage Account Name>"
		Microsoft.DocAsCode.MarkdigEngine.Extensions.QuoteSectionNoteBlock NOTE
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="In this " 
				EmphasisInline * Count: 2
					LiteralInline Value="curl" 
				LiteralInline Value=" command, the " 
				EmphasisInline * Count: 2
					LiteralInline Value="Subscription ID" 
				LiteralInline Value=" and " 
				EmphasisInline * Count: 2
					LiteralInline Value="Resource Group Name" 
				LiteralInline Value=" are at the top of the Overview page. The " 
				EmphasisInline * Count: 2
					LiteralInline Value="Storage Account Name" 
				LiteralInline Value=" is the name of the storage account you just created / page you should be on." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To formulate the correct URL for a query to list metrics, run the following command, and then press " 
			HtmlInline Value="<kbd>" 
			LiteralInline Value="Enter" 
			HtmlInline Value="</kbd>" 
			LiteralInline Value="." 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > LIST_METRICS_URL="https://management.azure.com/subscriptions/$SUB_ID/resourceGroups/$RG_NAME/providers/Microsoft.Storage/storageAccounts/$SA_NAME/providers/microsoft.insights/metricdefinitions?api-version=2018-01-01"
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To make a query against the REST API, run the following command, and then press " 
			HtmlInline Value="<kbd>" 
			LiteralInline Value="Enter" 
			HtmlInline Value="</kbd>" 
			LiteralInline Value=". Examine the results and identify the available metrics." 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > curl -s -H "$AUTH_HEADER" "$LIST_METRICS_URL" | jq
		Microsoft.DocAsCode.MarkdigEngine.Extensions.QuoteSectionNoteBlock NOTE
			Markdig.Syntax.ParagraphBlock 
				LiteralInline Value="In this " 
				EmphasisInline * Count: 2
					LiteralInline Value="curl" 
				LiteralInline Value=" command, the " 
				EmphasisInline * Count: 2
					LiteralInline Value="-s" 
				LiteralInline Value=" option suppresses the progress bar and the -H option passes the authentication token. The JSON results are piped to the " 
				EmphasisInline * Count: 2
					LiteralInline Value="jq" 
				LiteralInline Value=" tool for a more readable presentation." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To formulate the correct URL for a query to list metrics, run the following command, and then press " 
			HtmlInline Value="<kbd>" 
			LiteralInline Value="Enter" 
			HtmlInline Value="</kbd>" 
			LiteralInline Value="." 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > AVAILABILITY_URL="https://management.azure.com/subscriptions/$SUB_ID/resourceGroups/$RG_NAME/providers/Microsoft.Storage/storageAccounts/$SA_NAME/providers/microsoft.insights/metrics?metricnames=Availability&aggregation=Average&interval=PT1H&api-version=2018-01-01"
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To make a query against the REST API, run the following command, and then press " 
			HtmlInline Value="<kbd>" 
			LiteralInline Value="Enter" 
			HtmlInline Value="</kbd>" 
			LiteralInline Value=". Examine the results and identify the available metrics." 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > curl -s -H "$AUTH_HEADER" "$AVAILABILITY_URL" | jq
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="You can also make requests for other metrics that were listed in the first query results." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Access Azure Storage Metrics in Code" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="You've investigated the metrics that your video storage account sends to Azure Monitor, and you know that you want to display some of these metrics in the .NET mobile application that your administrators use to monitor the behavior of your video management system. Now you need to know how to use the Azure Monitor .NET API to retrieve metrics from Azure Monitor." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Overview of the Azure Monitor .NET SDK" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="The Azure Monitor SDK is a set of .NET classes and interfaces that make it simple to query for metrics in Azure Monitor from any .NET project. Using the NuGet package manager, you can add this SDK to desktop application projects, mobile apps, web apps, and other types of custom projects. You could, for example, display in a mobile app how some of those metrics vary over time, or respond if a metric exceeded some critical value." 
Microsoft.DocAsCode.MarkdigEngine.Extensions.QuoteSectionNoteBlock NOTE
	Markdig.Syntax.ParagraphBlock 
		LiteralInline Value="If you want to view metrics from a storage account, you must use the SDK version 0.18.0-preview or later." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Security Requirements" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Azure carefully controls access to metrics by authenticating users and authorizing them to access different resources. In unit 3, when you used " 
	EmphasisInline * Count: 2
		LiteralInline Value="curl" 
	LiteralInline Value=" to request storage metrics from Azure Monitor, you used the " 
	EmphasisInline * Count: 2
		LiteralInline Value="az" 
	LiteralInline Value=" utility to authenticate as the user you were logged into the Azure portal with. The result of this authentication was an access token, which you passed with your " 
	EmphasisInline * Count: 2
		LiteralInline Value="curl" 
	LiteralInline Value=" request the Azure Monitor REST API." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="For an application that uses the Azure .NET API to call Azure services, you can create a service principal in your Azure Active Directory. This service principal includes credentials that the app can supply to prove its identity before it makes a request." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="You must also assign a role to the service principal, which authorizes that app to access a resource. For example: if you assign the " 
	EmphasisInline * Count: 2
		LiteralInline Value="Contributor" 
	LiteralInline Value=" role to an app for a resource group, that app can read and write data to all the resources in that group, including Azure Monitor." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="How to create a service principal" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="To create a service principal in Azure:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Go to the " 
			LinkInline Url: https://portal.azure.com/ Title:  Image: False
				LiteralInline Value="Azure portal" 
			LiteralInline Value=". From the Azure Marketplace search box, enter " 
			EmphasisInline * Count: 2
				LiteralInline Value="Azure Active Directory" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the left nav bar, under the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Manage" 
			LiteralInline Value=" section, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="App registrations" 
			LiteralInline Value=", and then select " 
			EmphasisInline * Count: 2
				LiteralInline Value="+ New registration" 
			LiteralInline Value=". The " 
			EmphasisInline * Count: 2
				LiteralInline Value="Register an application" 
			LiteralInline Value=" window appears." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Name" 
			LiteralInline Value=" box, enter the service principal a name." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="For " 
			EmphasisInline * Count: 2
				LiteralInline Value="Supported account types" 
			LiteralInline Value=", select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Accounts in this organizational directory only (Microsoft only - Single tenant)" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="For " 
			EmphasisInline * Count: 2
				LiteralInline Value="Redirect URI" 
			LiteralInline Value=", select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Web" 
			LiteralInline Value=" for the authentication response, and specify a sign-on URL where users go for authentication." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Register" 
			LiteralInline Value=". Your new app registration window appears." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Make a note of the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Directory (tenant) ID" 
			LiteralInline Value="; this is a GUID that uniquely identifies the Active Directory that contains the service principal and is also referred to as the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Tenant ID" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Assign the new service principal to a role that has sufficient permissions to access the resources you need. For example, the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Contributor" 
			LiteralInline Value=" role on a resource group grants access to all the resources in that group, including any Azure Monitor resources." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="If you complete the optional exercise in the next unit, you'll create a service principal by following these steps." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="How to authenticate the application" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="When the service principal is ready, you can use it in your code to authenticate with Azure. To do this, your code must:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Use the " 
			EmphasisInline * Count: 2
				LiteralInline Value="ApplicationTokenProvider.LoginSilentAsync" 
			LiteralInline Value=" method to create a new set of service credentials. When you call this method, provide the tenant ID, application ID, and key that you made a note of when you created the service principal." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Create a new " 
			EmphasisInline * Count: 2
				LiteralInline Value="MonitorClient" 
			LiteralInline Value=" object by calling the " 
			EmphasisInline * Count: 2
				LiteralInline Value="MonitorClient" 
			LiteralInline Value=" constructor with the service credentials you created. This " 
			EmphasisInline * Count: 2
				LiteralInline Value="MonitorClient" 
			LiteralInline Value=" object will be used to submit queries for metrics." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Set the " 
			EmphasisInline * Count: 2
				LiteralInline Value="MonitorClient.SubscriptionID" 
			LiteralInline Value=" property to identify which Azure subscription to connect to. This is the same Subscription ID that you used in unit 3." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="How to list metric definitions and metrics values" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="After you have created the " 
	EmphasisInline * Count: 2
		LiteralInline Value="MonitorClient" 
	LiteralInline Value=" class, you can use it to query for Azure Storage metrics in Azure Monitor. The first step is to discover which metrics are available by listing their definitions." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="To do so, call the " 
	EmphasisInline * Count: 2
		LiteralInline Value="MetricDefinitions.ListAsync" 
	LiteralInline Value=" method on your " 
	EmphasisInline * Count: 2
		LiteralInline Value="MonitorClient" 
	LiteralInline Value=" object, and specify the storage account service's resource ID. This resource ID is the same value as you used in unit 3 to specify the metrics you wanted to list." 
Microsoft.DocAsCode.MarkdigEngine.Extensions.QuoteSectionNoteBlock NOTE
	Markdig.Syntax.ParagraphBlock 
		LiteralInline Value="The resource ID that you specify must correspond to correct service within your storage account; there are different resource IDs for the Blob, File, Table, and Queue services within the same storage account." 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="After you have identified the name of a metric to use, you can retrieve its values by calling the " 
	EmphasisInline * Count: 2
		LiteralInline Value="Metrics.ListAsync" 
	LiteralInline Value=" method and passing the metric's name and the time period of interest; this will return a collection of the values for that metric within the specific period. You can loop through this collection of values and display them to the user or take other action." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="You have created a service principal in Azure Active Directory, and you have successfully authenticated the service principal using the LoginSilentAsync method. When you call MetricDefinitions.ListAsync, you receive an access denied message. How should you resolve this problem?" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList False" 
			LiteralInline Value="Call the Metrics.ListAsync method instead of the MetricDefinitions.ListAsync method." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList True" 
			LiteralInline Value=" Assign the service principal to an appropriate role in Azure." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList False" 
			LiteralInline Value="Create an access key for the service principal in Azure." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="You have written code that successfully retrieves metric definitions for an Azure Storage account from Azure Monitor. Now you want to retrieve values of the UsedCapacity metric. Which method should you call?" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList False" 
			LiteralInline Value="MetricDefinitions.ListAsync" 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList True" 
			LiteralInline Value=" Metrics.ListAsync" 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			TaskList Value="TaskList False" 
			LiteralInline Value="The monitor client constructor" 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Optional Exercise - Access Azure Storage Metrics in Code" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="You want to start writing code that retrieves metrics about your video app storage account from Azure Monitor. To do this, you must create a service principal for your app in the Azure Active Directory. You'll then configure the correct security information in the app, and write the code that lists metric definitions." 
Microsoft.DocAsCode.MarkdigEngine.Extensions.QuoteSectionNoteBlock NOTE
	Markdig.Syntax.ParagraphBlock 
		LiteralInline Value="This exercise is optional. If you don't have an Azure account, you can read through the instructions so you understand how to use the Azure Storage .NET API to create applications that can retrieve metrics." 
		LineBreakInline Value="" 
		LiteralInline Value="If you want to complete this exercise but you don't have an Azure subscription or prefer not to use your own account, you will need to create a " 
		LinkInline Url: https://azure.microsoft.com/free/?azure-portal=true Title:  Image: False
			LiteralInline Value="free account" 
		LiteralInline Value=" before you begin." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Create a new console application and add the Azure Monitor API" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="To begin creating your application, use git to clone the sample application code." 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the Azure portal, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Cloud Shell (" 
				HtmlEntityInline Value="&gt; -> >" 
				LiteralInline Value="_" 
				LiteralInline Value=")" 
			LiteralInline Value=" on the toolbar at the top of the window, and, if prompted, select the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Bash" 
			LiteralInline Value=" shell option." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Run the following command to create a folder for the new console application in the root of your cloud shell." 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > mkdir ~/metricapp
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To clone the console app from Git Hub into the new folder, run the following command." 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > git clone https://github.com/MicrosoftDocs/mslearn-access-blob-storage-metrics-from-code ~/metricapp
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To change to the app's " 
			EmphasisInline * Count: 2
				LiteralInline Value="starter" 
			LiteralInline Value=" folder, run the following command:" 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > cd ~/metricapp/starter
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Create a service principal and access key for the new app" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="To grant your app permission to access Azure Monitor metrics, you must create a service principal in the Azure Active Directory. When your app identifies itself to Azure, it will use an access key. To create a service principal and access key, follow these steps:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Go to the " 
			LinkInline Url: https://portal.azure.com/ Title:  Image: False
				LiteralInline Value="Azure portal" 
			LiteralInline Value=", and in the left nav bar, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Azure Active Directory." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Azure Active Directory" 
			LiteralInline Value=" pane, under " 
			EmphasisInline * Count: 2
				LiteralInline Value="Manage" 
			LiteralInline Value=", select " 
			EmphasisInline * Count: 2
				LiteralInline Value="App registrations" 
			LiteralInline Value="." 
		Markdig.Syntax.ParagraphBlock 
			LinkInline Url: media/5-access-app-registrations.png Title:  Image: True
				LiteralInline Value="Screenshot of the Azure Active Directory navigation options with the app registrations option highlighted." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Select  " 
			EmphasisInline * Count: 2
				LiteralInline Value="New application registration" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Name" 
			LiteralInline Value=" textbox, enter " 
			EmphasisInline * Count: 2
				LiteralInline Value="metricapp" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Application type" 
			LiteralInline Value=" dropdown, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Web app/API" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Sign-on URL" 
			LiteralInline Value=", enter " 
			EmphasisInline * Count: 2
				LinkInline Url: https://contoso.org/metricapp Title: (null) Image: False
					LiteralInline Value="https://contoso.org/metricapp" 
			LiteralInline Value=", and then select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Create" 
			LiteralInline Value="." 
		Markdig.Syntax.ParagraphBlock 
			LinkInline Url: media/5-create-app-registration.png Title:  Image: True
				LiteralInline Value="Screenshot of the create pane with the create button highlighted." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="On the " 
			EmphasisInline * Count: 2
				LiteralInline Value="metricapp" 
			LiteralInline Value=" registration page, make a note of the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Application ID" 
			LiteralInline Value=", and then select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Settings" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Under " 
			EmphasisInline * Count: 2
				LiteralInline Value="API Access" 
			LiteralInline Value=", select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Keys" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Passwords" 
			LiteralInline Value=" section, enter " 
			EmphasisInline * Count: 2
				LiteralInline Value="metricskey" 
			LiteralInline Value=" in the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Key description" 
			LiteralInline Value=" textbox." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Expires" 
			LiteralInline Value=" dropdown, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="In 1 Year" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Save" 
			LiteralInline Value="." 
		Markdig.Syntax.ParagraphBlock 
			LinkInline Url: media/5-configure-access-key.png Title:  Image: True
				LiteralInline Value="Screenshot of the keys pane with the save button highlighted." 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Make a note of the key in the " 
			EmphasisInline * Count: 2
				LiteralInline Value="VALUE" 
			LiteralInline Value=" column." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Determine the tenant ID for your app" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="When your app identifies itself to Azure, it will also need to provide a tenant ID, which is also called a directory ID. To determine your tenant ID, follow these steps:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Go to the " 
			LinkInline Url: https://portal.azure.com/ Title:  Image: False
				LiteralInline Value="Azure portal" 
			LiteralInline Value=", and in the left nav bar, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Azure Active Directory" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Under " 
			EmphasisInline * Count: 2
				LiteralInline Value="Manage" 
			LiteralInline Value=", select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Properties" 
			LiteralInline Value="." 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Make a note of the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Directory ID" 
			LiteralInline Value=" value; this is the tenant ID for your app." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Determine your resource group and subscription IDs and assign the app to a role" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="You must now add the app service principal to a role, so that the app has permission to access Azure Monitor:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Go to the " 
			LinkInline Url: https://portal.azure.com/ Title:  Image: False
				LiteralInline Value="Azure portal" 
			LiteralInline Value=", and in the left nav bar, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Resource Groups" 
			LiteralInline Value=", and then select the resource group that you created as part of the optional exercise in unit 3." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="On the resource group page, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Overview" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Copy the name of your resource group and your " 
			EmphasisInline * Count: 2
				LiteralInline Value="Subscription ID" 
			LiteralInline Value="; you will use these values when you modify your application code." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Access control (IAM)" 
			LiteralInline Value=" in the menu." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Select " 
			EmphasisInline * Count: 2
				LiteralInline Value="+ Add" 
			LiteralInline Value=", and then select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Add a role assignment" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Role" 
			LiteralInline Value=" dropdown, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Contributor" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Assign access to" 
			LiteralInline Value=" dropdown, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Azure AD user, group, or service principal" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Select" 
			LiteralInline Value=" textbox, enter " 
			EmphasisInline * Count: 2
				LiteralInline Value="metricapp" 
			LiteralInline Value=", and then select " 
			EmphasisInline * Count: 2
				LiteralInline Value="metricapp" 
			LiteralInline Value="." 
		Markdig.Syntax.ParagraphBlock 
			LinkInline Url: media/5-assign-role-to-app.png Title:  Image: True
				LiteralInline Value="Screenshot of the add role assignment pane with the metricapp option highlighted." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Save" 
			LiteralInline Value="." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Start coding the app" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Now that the app service principal has been created and configured, you can complete the app's code:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the Cloud Shell on the right, to ensure you are in the correct folder, run the following command, and then press " 
			HtmlInline Value="<kbd>" 
			LiteralInline Value="Enter" 
			HtmlInline Value="</kbd>" 
			LiteralInline Value="." 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > cd ~/metricapp/starter
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To start the code editor, run the following command, and then press " 
			HtmlInline Value="<kbd>" 
			LiteralInline Value="Enter" 
			HtmlInline Value="</kbd>" 
			LiteralInline Value="." 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > code .
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the list of files on the left, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Program.cs" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="At the top of the code file, add the following lines of code." 
		Markdig.Syntax.FencedCodeBlock c# - 2 lines
		 > using Microsoft.Azure.Management.Monitor;
		 > using Microsoft.Azure.Management.Monitor.Models;
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Formulate the resource ID" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="The app must request metrics by specifying the resource ID. To formulate the resource ID, follow these steps:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Main" 
			LiteralInline Value=" procedure, locate the following line of code, and add the name of the resource group that you determined earlier within the quotes." 
		Markdig.Syntax.FencedCodeBlock c# - 1 lines
		 > string resourceGroupName = "";
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Locate the following line of code, and add the subscription ID that you determined earlier within the quotes." 
		Markdig.Syntax.FencedCodeBlock c# - 1 lines
		 > string subscriptionID = "";
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Locate the following line of code, and add the name of the storage account that you created in unit 3 within the quotes." 
		Markdig.Syntax.FencedCodeBlock c# - 1 lines
		 > string storageAccountName = "";
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Store the correct security information" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="Now, you must ensure that the app uses the security details you configured and noted earlier:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Locate the following line of code, and add the directory ID or tenant ID you determined earlier within the quotes." 
		Markdig.Syntax.FencedCodeBlock c# - 1 lines
		 > string tenantID = "";
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Locate the following line of code, and add the application ID you determined earlier within the quotes." 
		Markdig.Syntax.FencedCodeBlock c# - 1 lines
		 > string applicationID = "";
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Locate the following line of code, and add the access key you determined earlier within the quotes." 
		Markdig.Syntax.FencedCodeBlock c# - 1 lines
		 > string accessKey = "";
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Obtain a list of metric definitions" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="You can now write the code that retrieves a list of metric definitions for the storage account:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Program.cs" 
			LiteralInline Value=" file, within the " 
			EmphasisInline * Count: 2
				LiteralInline Value="GetMetricDefinitions" 
			LiteralInline Value=" method, locate the following comment." 
		Markdig.Syntax.FencedCodeBlock c# - 1 lines
		 > //Evaluate metric definitions here
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To get a list of metric definitions, replace the comment with the following code." 
		Markdig.Syntax.FencedCodeBlock c# - 1 lines
		 > IEnumerable<MetricDefinition> metricDefinitions = await readOnlyClient.MetricDefinitions.ListAsync(resourceUri: resourceURI, cancellationToken: new CancellationToken());
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To show the list of metrics to the user, on the next lines, enter the following code." 
		Markdig.Syntax.FencedCodeBlock c# - 5 lines
		 > Console.WriteLine("Metric Definitions:");
		 > foreach (var metricDef in metricDefinitions)
		 > {
		 >     Console.WriteLine(metricDef.Name.Value);
		 > }
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To close the code editor, select " 
			EmphasisInline * Count: 2
				LiteralInline Value="..." 
			LiteralInline Value=" on the right, and then select " 
			EmphasisInline * Count: 2
				LiteralInline Value="Close code editor" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="To run your application, run the follow command, and then press " 
			HtmlInline Value="<kbd>" 
			LiteralInline Value="Enter" 
			HtmlInline Value="</kbd>" 
			LiteralInline Value="." 
		Markdig.Syntax.FencedCodeBlock bash - 1 lines
		 > dotnet run
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Your application will compile and execute, and a list of metric definitions in the console window will appear." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Summary" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="In this module, you learned about two different types of APIs that you can use to create applications that access the metrics, which Azure Storage accounts send to Azure Monitor when you use Blob storage:" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="The Azure Storage REST API is a web service that you can access through HTTP requests through port 80. In unit 3, you learned how to use the " 
			EmphasisInline * Count: 2
				LiteralInline Value="curl" 
			LiteralInline Value=" tool to send such requests from the Cloud Shell, and view the results." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In unit 5, you learned how to use the Azure Storage .NET API to make a similar request. You can use this API to interact with Azure Monitor, and access storage metrics for display in mobile apps, web applications, and many other types of custom project." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Clean up" 
Markdig.Syntax.ParagraphBlock 
	LiteralInline Value="It's important that you clean up any unused resources. You're charged for the configured capacity not how much of the database is used. For this module, we make these resources available to you free of charge. But you should get into the habit of deleting resources when you're done with them." 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Go to the " 
			LinkInline Url: https://portal.azure.com/ Title:  Image: False
				LiteralInline Value="Azure portal" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the navigation menu on the left, click " 
			EmphasisInline * Count: 2
				LiteralInline Value="Resource Groups" 
			LiteralInline Value=", and then click the resource group that you created as part of the optional exercise in unit 3." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="In the " 
			EmphasisInline * Count: 2
				LiteralInline Value="Overview" 
			LiteralInline Value=" pane, click " 
			EmphasisInline * Count: 2
				LiteralInline Value="Delete resource group" 
			LiteralInline Value="." 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LiteralInline Value="Enter the name of the resource group that you created to confirm, and then click " 
			EmphasisInline * Count: 2
				LiteralInline Value="Delete" 
			LiteralInline Value="." 
Markdig.Syntax.HeadingBlock 
	LiteralInline Value="Learn More" 
Markdig.Syntax.ListBlock 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LinkInline Url: /azure/storage/common/storage-metrics-in-azure-monitor Title:  Image: False
				LiteralInline Value="Azure Storage metrics in Azure Monitor" 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LinkInline Url: https://www.nuget.org/packages/Microsoft.Azure.Management.Monitor/ Title:  Image: False
				LiteralInline Value="Azure Monitor SDK" 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LinkInline Url: /rest/api/monitor/ Title:  Image: False
				LiteralInline Value="Azure Monitor REST API Reference" 
	Markdig.Syntax.ListItemBlock 
		Markdig.Syntax.ParagraphBlock 
			LinkInline Url: /azure/storage/common/storage-metrics-migration Title:  Image: False
				LiteralInline Value="Azure Storage Metrics Migration" 
Markdig.Syntax.LinkReferenceDefinitionGroup 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
	Markdig.Extensions.AutoIdentifiers.HeadingLinkReferenceDefinition 
